'use client'

import Link from 'next/link'
import { type FC, useMemo } from 'react'
import { references } from '@/shared/config'
import { techTextToNodes } from '@/shared/lib/tech-text'
import { Accordion, AccordionContent, AccordionItem, AccordionTrigger, H3, P } from '@/shared/ui'

const termsFaqData = [
    {
        question: 'Что такое условия оказания услуг?',
        answer: 'Условия оказания услуг — это документ, регулирующий порядок взаимодействия при получении образовательных услуг. Ознакомившись с условиями и начав пользоваться услугами (запись на занятие, оплата), вы принимаете их. Полный текст размещён на странице «Условия».',
    },
    {
        question: 'Как определяется стоимость занятий?',
        answer: 'Стоимость услуг согласовывается при записи на занятия. Уже оплаченные занятия сохраняют ту цену, на которой мы договорились, даже если в дальнейшем условия для новых учеников изменятся. О любых изменениях расценок я сообщаю заранее.',
    },
    {
        question: 'Как отменить или перенести занятие?',
        answer: 'Отменить занятие можно не позднее чем за 24 часа до его начала. В этом случае мы переносим его на другое время или я возвращаю средства. При отмене позднее указанного срока занятие считается проведённым. Для переноса просьба предупреждать не менее чем за 3 дня до занятия, чтобы мы могли подобрать удобную дату.',
    },
    {
        question: 'В каком порядке производится оплата?',
        answer: 'Оплата производится перед занятием согласованным способом (например, перевод на карту или через платёжный сервис). Факт оплаты означает ваше согласие с условиями оказания услуг. Реквизиты и способ оплаты уточняются при записи.',
    },
    {
        question: 'Как осуществляется возврат средств?',
        answer: 'Возврат средств производится тем же способом, которым была произведена оплата, или иным способом по согласованию с вами. Если занятие отменено по моей инициативе или по моей вине, возврат производится в полном объёме.',
    },
    {
        question: 'Несёте ли вы ответственность за технические сбои?',
        answer: 'Я не несу ответственности за сбои сторонних сервисов (Telegram, видеоплатформы и т.п.) или за технические проблемы на вашей стороне (интернет, устройство). Если услуга не была оказана по моей вине, мы переносим занятие или я возвращаю оплату.',
    },
    {
        question: 'Как обрабатываются персональные данные?',
        answer: 'Ваши персональные данные (имя, контакты) используются только для организации занятий и связи с вами. Я не передаю их третьим лицам и обеспечиваю их обработку в соответствии с законодательством о персональных данных.',
    },
    {
        question: 'Могут ли несовершеннолетние пользоваться услугами?',
        answer: 'Услуги ориентированы на лиц старше 18 лет. Для несовершеннолетних необходимо согласие и участие законного представителя (родителя или опекуна), который принимает условия от имени обучающегося.',
    },
    {
        question: 'Могут ли измениться условия оказания услуг?',
        answer: 'Да. Я вправе в любое время обновить условия. Новая редакция публикуется на сайте и применяется к последующим записям и оплатам после её размещения. Уже оплаченные занятия действуют по условиям, действовавшим на момент оплаты.',
    },
] as const

const TermsQuestionsWidget: FC = () => {
    const accordions = useMemo(
        () =>
            termsFaqData.map((item) => (
                <AccordionItem key={item.question} value={item.question}>
                    <AccordionTrigger className='hover:underline'>{item.question}</AccordionTrigger>
                    <AccordionContent>
                        <P>{techTextToNodes(item.answer)}</P>
                    </AccordionContent>
                </AccordionItem>
            )),
        [],
    )

    return (
        <section className='w-full max-w-6xl p-6 lg:p-7'>
            <div className='flex flex-col gap-4 lg:gap-5'>
                <H3>Вопросы об условиях оказания услуг</H3>
                <P>
                    Ниже — краткие ответы об условиях оказания услуг: оплата, отмена, перенос занятий, возврат средств и
                    обработка данных.{' '}
                    <Link
                        href={references.terms.href}
                        className='font-normal underline'
                        aria-label={`Перейти к полному тексту: ${references.terms.ariaLabel}`}
                    >
                        Полный текст размещён на отдельной странице
                    </Link>
                    .
                </P>
                <Accordion type='single' className='w-full'>
                    {accordions}
                </Accordion>
            </div>
        </section>
    )
}

TermsQuestionsWidget.displayName = 'TermsQuestionsWidget'

export { TermsQuestionsWidget }
